# 策略對比文檔

## 1. 波動率預測策略 (Volatility Prediction)

### 核心思想
不預測價格方向，只預測未來3根K線是否出現高波動（>0.5%）

### 交易邏輯
```
1. 模型預測「高波動即將到來」
2. 同時掛做多和做空限價單
   - 做多: 當前價 - 0.3%
   - 做空: 當前價 + 0.3%
3. 其中一邊成交後，另一邊作為止損
4. 目標: 吃波動價差 (0.3% x 2 = 0.6%)
```

### 優勢
- 不需要預測方向（難度降低）
- 利用波動率壓縮後的釋放
- 双向下單，有一邊必然成交
- 預期準確率: 65-75%

### 關鍵特徵
1. BB Squeeze（BB帶寬度壓縮）
2. 連續低波動時間（靖默期）
3. 成交量枯竭
4. ATR加速度
5. 連續小振幅K線

### 實現狀態
- 已完成: 標籤生成器、特徵提取器、訓練器
- 待完成: 信號生成器、雙向掛單回測引擎、Streamlit Tab

---

## 2. 反轉點波段策略 (Reversal Swing)

### 核心思想
捕捉趨勢轉折點，進場後持有數小時至數天，追求大振幅利潤

### 策略A: 多時間框架共振反轉

```
標籤定義:
- 三個時間框架同時出現反轉信號
  - 15m: RSI過度買賣 + BB觸碰
  - 1h:  趨勢轉弱 (MACD交叉)
  - 4h:  接近關鍵支撐/阻力

特徵:
- 15m: RSI, BB位置, 短期動量
- 1h:  MACD, EMA交叉, ADX
- 4h:  支撐阻力距離, 體量, 趨勢強度

優効:
- 多時框確認，準確率高
- 適合波段交易 (1-3天)
- 預期準確率: 60-70%
```

### 策略B: 越勢反轉 (Divergence)

```
核心:
- 價格创新高，但RSI/MACD未刚新高 (頂背離)
- 價格创新低，但RSI/MACD未刚新低 (底背離)

標籤:
1. 識別波峰和波谷 (ZigZag)
2. 檢測價格與指標的背離
3. 確認背離後反轉成功

特徵:
- 波峰/波谷的高度變化
- RSI/MACD的波峰/波谷變化
- 價格與指標的相關係數
- 背離強度 (價格差距 vs 指標差距)

優劳:
- 背離是經典反轉信號
- 預期準確率: 55-65%
- 需要ZigZag波峰識別
```

### 策略C: 機器學習端點檢測

```
核心:
- 直接讓模型學習識別「趨勢轉折點」

標籤定義:
1. 識別區間高點/低點
2. 確認後續至少N根K線持續反轉
3. 反轉幅度 >= 2%

特徵:
- 價格在近20/50根K線的相對位置
- RSI/MACD的極值狀態
- 成交量高潮
- K線型態 (長上影/長下影)
- 前期趨勢強度

優劳:
- 模型自動學習特徵組合
- 不需要手工設計規則
- 預期準確率: 58-68%
```

---

## 3. 策略比較

| 策略 | 難度 | 準確率 | 持倉時間 | 目標利潤 | 適用場景 |
|------|------|---------|---------|---------|----------|
| 波動率預測 | 低 | 65-75% | 15-45分 | 0.3-0.6% | 震盪市 |
| 多時框反轉 | 中 | 60-70% | 1-3天 | 2-5% | 趨勢轉折 |
| 背離反轉 | 高 | 55-65% | 1-5天 | 3-8% | 趨勢末端 |
| 機器學習 | 中 | 58-68% | 0.5-3天 | 2-6% | 所有市況 |

---

## 4. 建議實現順序

### 第一階段: 波動率預測
1. 已完成核心模組
2. 需要完成雙向掛單回測引擎
3. 預期1-2小時完成

### 第二階段: 機器學習端點檢測
1. 最簡單直接
2. 可以重用現有框架
3. 預期2-3小時完成

### 第三階段: 多時框共振
1. 需要加載多個時間框架數據
2. 需要特徵對齊
3. 預期3-4小時完成

### 第四階段: 背離反轉
1. 需要ZigZag波峰識別
2. 需要背離檢測算法
3. 預期4-5小時完成

---

## 5. 使用建議

### 波動率策略參數
```python
波動率閾值: 0.005 (0.5%)
預測時間: 3根K線
掛單偏移: 0.003 (0.3%)
止損: 0.006 (0.6%) - 另一邊掛單價
```

### 機器學習端點參數
```python
反轉幅度閾值: 0.02 (2%)
確認K線數: 10根
回測區間: 50根 (尋找波峰波谷)
止盈: 5% / 止損: 2%
```

---

## 6. 總結

**立即可測試**: 波動率預測策略
- 核心模組已完成
- 只需要完成回測引擎
- 預期準確率最高 (65-75%)

**波段交易**: 機器學習端點檢測
- 實現難度中等
- 預期準確率 58-68%
- 適合持有數小時至數天

**先完成波動率策略，驗證有效後再擴展至波段策略**